(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(75),o=n.n(i),c=(n(93),n(76)),l=n(77),s=n(86),u=n(78),d=n(87),m=n(83),f=n(3),p=n(10),y=n(16),k=n(7);function g(){var e=Object(p.a)(["\n                    & > * {\n                    display: inline-block;\n                    }\n                    & > * + * {\n                    margin-left: 15px;\n                    }\n                "]);return g=function(){return e},e}var h=a.a.forwardRef(function(e,t){var n=e.className,r=Object(y.a)(e,["className"]);return a.a.createElement("div",Object.assign({},r,{ref:t,className:Object(k.b)(n,Object(k.a)(g()))}))});function v(){var e=Object(p.a)(["\n                    position: relative;\n                    padding: 1px 18px 17px;\n                    margin: 0 -20px;\n                    border-bottom: 2px solid #eee;\n                    margin-bottom: 20px;\n                "]);return v=function(){return e},e}var b=a.a.forwardRef(function(e,t){var n=e.className,r=Object(y.a)(e,["className"]);return a.a.createElement(h,Object.assign({},r,{ref:t,className:Object(k.b)(n,Object(k.a)(v()))}))});function w(){var e=Object(p.a)(["\n                        font-size: 18px,\n                        vertical-align: text-bottom\n                    "]);return w=function(){return e},e}var _=a.a.forwardRef(function(e,t){var n=e.className,r=Object(y.a)(e,["className"]);return a.a.createElement("i",Object.assign({},r,{ref:t,className:Object(k.b)("material-icons",n,Object(k.a)(w()))}))});function B(){var e=Object(p.a)(["\n                        cursor: pointer;\n                        color: ","\n                    "]);return B=function(){return e},e}var O=a.a.forwardRef(function(e,t){var n=e.className,r=e.active,i=Object(y.a)(e,["className","active"]);return a.a.createElement("span",Object.assign({},i,{ref:t,className:Object(k.b)(n,Object(k.a)(B(),r?"black":"#ccc"))}))}),j=n(9),N=n(82);function I(){var e=Object(p.a)(["\n                        display: none\n                    "]);return I=function(){return e},e}var E=a.a.forwardRef(function(e,t){var n,r=Object(N.a)({},e);return"image"===r.accepttype&&(n="image/*"),a.a.createElement("input",Object.assign({},r,{type:"file",ref:t,accept:n,className:Object(k.b)(Object(k.a)(I()))}))});function L(){var e=Object(p.a)(["\n                        cursor: pointer;\n                        display: block;\n                        max-width: 100%;\n                        max-height: 20em;\n                        box-shadow: ",";\n                    "]);return L=function(){return e},e}var x=function(e){var t=e.node,n=e.attributes,r=e.isFocused,i=e.className;return a.a.createElement("img",Object.assign({},n,{src:t.data.get("src"),alt:t.data.get("alt"),className:Object(k.b)(i,Object(k.a)(L(),r?"0 0 0 2px blue;":"none"))}))};function D(){var e=Object(p.a)(["\n                        cursor: pointer;\n                        display: block;\n                        max-width: 100%;\n                        max-height: 20em;\n                        box-shadow: ",";\n                    "]);return D=function(){return e},e}var K=function(e){var t=e.node,n=e.attributes,r=e.isFocused,i=e.className;return a.a.createElement("img",Object.assign({},n,{onClick:function(e){return function(e){if(window.confirm("Download the file?")){var n=document.createElement("a");n.download=t.data.get("alt"),n.href=t.data.get("src"),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}e.preventDefault()}(e)},src:"pdf"===t.data.get("fileType")?"https://image.flaticon.com/icons/svg/29/29587.svg":"https://cdn0.iconfinder.com/data/icons/file-extension-line-icon/100/txtb-512.png",alt:t.data.get("alt"),className:Object(k.b)(i,Object(k.a)(D(),r?"0 0 0 2px blue;":"none"))}))},R=n(34),S=function(e,t){var n=e.blocks,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).type||n.unordered_list,a=t.value.document.getRootBlocksAtRange(t.value.selection);t.withoutNormalizing(function(){a.forEach(function(e){(function(e,t){return t.type==e.unordered_list||t.type==e.ordered_list})(n,e)||(t.wrapBlockByKey(e.key,r),t.wrapBlockByKey(e.key,n.list_item))})})},C=function(e,t,n){e.blocks;var r=t.value.document.getNode(n);t.withoutNormalizing(function(){t.unwrapNodeByKey(r.key);var e=t.value.document.getParent(r.key),n=e.nodes.findIndex(function(e){return e.key===r.key});r.nodes.forEach(function(r,a){t.moveNodeByKey(r.key,e.key,a+n)}),t.removeNodeByKey(r.key)})},z=function(e,t){var n=e.blocks,r=t.value.document.getNodesAtRange(t.value.selection).filter(function(e){return!!t.value.document.getFurthest(e.key,function(e){return e.type===n.list_item})}),a=new Set;r.map(function(e){return t.value.document.getFurthest(e.key,function(e){return e.type==n.list_item})}).filter(function(e,t,n){return n.indexOf(e)==t}).filter(function(e){return!a.has(e.key)&&(a.add(e.key),!0)}).forEach(function(e){C({blocks:n},t,e.key)})},M=function(e,t){var n=e.blocks,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.value,i=a.document,o=a.startBlock,c=r.type||n.unordered_list,l=i.getParent(o.key);if(!(l.type==n.list_item))return t.wrapList({type:c});var s=i.getParent(l.key);s.type==c?t.unwrapList():t.setNodeByKey(s.key,c)},F=function(e,t){var n=e.blocks,r=t.value,a=r.document,i=r.startBlock,o=a.getParent(i.key),c=a.getParent(o.key),l=a.getParent(c.key);if(console.log(o,c,l),l.type==n.list_item){var s=a.getParent(l.key),u=s.nodes.indexOf(l);console.log(c.nodes);var d=c.nodes.skipUntil(function(e){return e===o}).rest();if(d.isEmpty())t.moveNodeByKey(o.key,s.key,u+1);else{var m=f.a.create({object:"block",type:c.type});t.withoutNormalizing(function(){t.insertNodeByKey(o.key,o.nodes.size,m),t.moveNodeByKey(o.key,s.key,u+1),d.forEach(function(e,n){return t.moveNodeByKey(e.key,m.key,m.nodes.size+n)})})}}},P=function(e,t){var n=e.blocks,r=t.value,a=r.document,i=r.startBlock,o=a.getParent(i.key),c=a.getPreviousSibling(o.key),l=a.getParent(o.key);if(!(t.value.document.getAncestors(o.key).toArray().filter(function(e){return e.type===l.type}).length>=n.maximumDepth)&&o&&c){var s=c.nodes.filter(function(e){return e.type===l.type}).get(0);if(s)t.withoutNormalizing(function(){t.moveNodeByKey(o.key,s.key,s.nodes.size)});else{var u=f.a.create({object:"block",type:l.type});t.withoutNormalizing(function(){t.insertNodeByKey(c.key,c.nodes.size,u),t.moveNodeByKey(o.key,u.key,0)})}}},A=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(void 0,[t].concat(r))}},H=n(85),J=n(22),U=n(84),V=n(52),T=n.n(V),q="paragraph",G={document:{nodes:[{object:"block",type:"paragraph"}]}},Q=Object(j.isKeyHotkey)("mod+b"),W=Object(j.isKeyHotkey)("mod+i"),X=Object(j.isKeyHotkey)("mod+u"),Y=Object(j.isKeyHotkey)("mod+`"),Z=Object(j.isKeyHotkey)("mod+d"),$=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(R.a)({},e),n=Object(R.a)({unordered_list:"unordered-list",ordered_list:"ordered-list",list_item:"list-item",list_item_child:"list-item-child",default:"paragraph",child_block_list:["paragraph","image"],maximumBlockInListItem:3,maximumDepth:3},t.blocks),r=Object(R.a)({unordered_list:"unordered-list",ordered_list:"ordered-list",list_item:"list-item",list_item_child:"list-item-child"},t.classNames),i=function(e){return{wrapList:A(S,e),unwrapList:A(z,e),toggleList:A(M,e),unwrapListByKey:A(C,e),decreaseListItemDepth:A(F,e),increaseListItemDepth:A(P,e)}}({blocks:n}),o=function(e,t){var r=e.value.document.getParent(t.key);return function(e){return e&&e.type==n.list_item}(r)?r:null},c=function(e,t){var r=e.value.document.getParent(t.key);return function(e){return e&&(e.type==n.unordered_list||e.type==n.ordered_list)}(r)?r:null},l=function(e){var t,n=e.blocks;return{blocks:(t={},Object(J.a)(t,n.unordered_list,{nodes:[{match:{type:n.list_item}}]}),Object(J.a)(t,n.ordered_list,{nodes:[{match:{type:n.list_item}}]}),Object(J.a)(t,n.list_item,{parent:[{type:n.unordered_list},{type:n.ordered_list}],nodes:[{match:[].concat(Object(U.a)(n.child_block_list.map(function(e){return{type:e}})),[{type:n.list_item_child}]),min:0,max:n.maximumBlockInListItem},{match:[{type:n.unordered_list},{type:n.ordered_list}],min:0,max:1}],normalize:function(e,t){switch(t.code){case"child_type_invalid":return console.log("wrap",t.child),void e.wrapBlockByKey(t.child.key,{type:n.list_item_child});case"parent_type_invalid":return void e.wrapBlock(n.unordered_list);default:return}}}),t)}}({blocks:n}),s=function(e){var t=e.blocks,n=function(e){return e&&(e.type==t.unordered_list||e.type==t.ordered_list)};return function(e,t,r){if("document"!==e.object&&"block"!==e.object)return r();var a=e.nodes.map(function(t,r){if(!n(t))return null;var a=e.nodes.get(r+1);return a&&n(a)&&function(e,t){return e.type==t.type}(t,a)?[t,a]:null}).filter(function(e){return e});return a.isEmpty()?r():function(e){a.reverse().forEach(function(t){var n=Object(H.a)(t,2),r=n[0],a=n[1];e.value.document.getDescendant(a.key).nodes.forEach(function(t,n){e.withoutNormalizing(function(){e.moveNodeByKey(t.key,r.key,r.nodes.size+n)})}),e.withoutNormalizing(function(){e.removeNodeByKey(a.key)})})}}}({blocks:n}),u=function(e){var t=e.blocks,n=e.classNames;return function(e,r,i){switch(e.node.type){case t.unordered_list:return a.a.createElement("ul",Object.assign({className:n.unordered_list},e.attributes),e.children);case t.ordered_list:return a.a.createElement("ol",Object.assign({className:n.ordered_list},e.attributes),e.children);case t.list_item:return a.a.createElement("li",Object.assign({className:n.list_item},e.attributes),e.children);case t.list_item_child:return a.a.createElement("div",Object.assign({className:n.list_item_child},e.attributes),e.children);default:return i()}}}({blocks:n,classNames:r});return[{commands:{wrapList:i.wrapList,unwrapList:i.unwrapList,toggleList:i.toggleList,decreaseListItemDepth:i.decreaseListItemDepth,increaseListItemDepth:i.increaseListItemDepth},normalizeNode:s,renderNode:u,schema:l,onKeyDown:function(e,t,n){if(!o(t,t.value.startBlock))return n();Object(j.isKeyHotkey)("backspace")(e)?(console.log("backspace"),e.preventDefault(),function(e,t,n){var r=t.value.selection;if(r.isExpanded)return n();if(0!==r.start.offset)return n();var a=o(t,t.value.startBlock),i=c(t,a);o(t,i)?t.decreaseListItemDepth():t.unwrapList()}(0,t,n)):Object(j.isKeyHotkey)("enter")(e)?(console.log("enter"),e.preventDefault(),function(e,t,n){var r=t.value,a=r.selection,i=r.startBlock;if(e.preventDefault(),a.isExpanded&&t.delete(),0===a.start.offset&&""===i.getText()){var l=o(t,t.value.startBlock),s=c(t,l);return o(t,s)?void t.decreaseListItemDepth():void t.unwrapList()}var u=o(t,t.value.startBlock);t.splitDescendantsByKey(u.key,a.start.key,a.start.offset)}(e,t)):Object(j.isKeyHotkey)("shift+enter")(e)?(console.log("shift+enter"),e.preventDefault(),function(e,t,n){e.preventDefault(),t.insertText("\n")}(e,t)):Object(j.isKeyHotkey)("tab")(e)?(console.log("tab"),e.preventDefault(),t.increaseListItemDepth()):Object(j.isKeyHotkey)("shift+tab")(e)&&(console.log("shift+tab"),e.preventDefault(),t.decreaseListItemDepth())}}]}({blocks:{ordered_list:"ordered-list",unordered_list:"unordered-list",list_item:"list-item",maximumDepth:3,child_block_list:["paragraph","image"]}})],ee={document:{last:{type:"paragraph"},normalize:function(e,t){var n=t.code,r=t.node;t.child;switch(n){case"last_child_type_invalid":var a=f.a.create("paragraph");return e.insertNodeByKey(r.key,r.nodes.size,a)}}},blocks:{image:{isVoid:!0},file:{isVoid:!0}}},te=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){var t=e.value;n.setState({value:t})},n.ref=function(e){n.editor=e},n.saveEditor=function(){window.localStorage.setItem("editorValue",JSON.stringify(n.state.value.toJSON())),window.localStorage.setItem("blockLimit",n.state.blockLimit)},n.cancelChanges=function(){n.setState({value:window.localStorage.getItem("editorValue")?f.n.fromJSON(JSON.parse(T.a.cloneDeep(window.localStorage.getItem("editorValue")))):f.n.fromJSON(G),blockLimit:window.localStorage.getItem("blockLimit")?Number.parseInt(window.localStorage.getItem("blockLimit")):-1})},n.imageInputRef=a.a.createRef(),n.fileInputRef=a.a.createRef(),n.renderMarkButton=function(e,t){var r=n.state.value.activeMarks.some(function(t){return t.type===e});return a.a.createElement(O,{onClick:function(t){return n.clickMark(t,e)},active:r},a.a.createElement(_,null,t))},n.renderBlockButton=function(e,t){var r=n.state.value,i=r.blocks.some(function(t){return t.type===e});return i=i||r.blocks.some(function(t){return!!r.document.getClosest(t.key,function(t){return t.type===e})}),a.a.createElement(O,{onClick:function(t){return n.clickBlock(t,e)},active:i},a.a.createElement(_,null,t))},n.clickMark=function(e,t){e.preventDefault(),n.editor.toggleMark(t)},n.clickBlock=function(e,t){e.preventDefault();var r=n.state.value.blocks.some(function(e){return e.type===t});"image"===t?n.startImageUpload():"file"===t?n.startFileUpload():["unordered-list","ordered-list"].includes(t)?n.editor.toggleList({type:t}):n.editor.setBlocks(r?q:t)},n.onKeyDown=function(e,t,n){var r;if(Q(e))r="bold";else if(X(e))r="underlined";else if(W(e))r="italic";else if(Y(e))r="code";else{if(!Z(e))return n();r="strikethrough"}e.preventDefault(),t.toggleMark(r)},n.renderMark=function(e,t,n){var r=e.children,i=e.attributes;switch(e.mark.type){case"bold":return a.a.createElement("strong",i,r);case"italic":return a.a.createElement("em",i,r);case"code":return a.a.createElement("code",i,r);case"underlined":return a.a.createElement("u",i,r);case"strikethrough":return a.a.createElement("del",i,r);default:return n()}},n.renderBlock=function(e,t,n){var r=e.children,i=e.node,o=e.attributes;switch(i.type){case"image":return a.a.createElement(x,e);case"file":return a.a.createElement(K,e);case"header-1":return a.a.createElement("h1",o,r);case"header-2":return a.a.createElement("h2",o,r);case"list-item":return a.a.createElement("li",o,r);case"unordered-list":return a.a.createElement("ul",o,r);case"ordered-list":return a.a.createElement("ol",o,r);default:return n()}},n.startFileUpload=function(){n.fileInputRef.current.click()},n.startImageUpload=function(){n.imageInputRef.current.click()},n.imageInputCompletion=function(){var e=n.imageInputRef.current.files[0];n.handleImageInsert(e)},n.fileInputCompletion=function(){var e=n.fileInputRef.current.files[0];e&&(n.handleImageInsert(e)||n.handleFileInsert(e))},n.handleFileInsert=function(e){if(!e)return!1;var t=new FileReader;return!(!e.type.includes("application/pdf")&&!e.type.includes("text/plain"))&&(t.readAsDataURL(e),t.onload=function(){n.editor.command(n.createFileBlock,t.result,e.name,e.type.includes("application/pdf")?"pdf":"txt"),n.fileInputRef.current.value=null},!0)},n.handleImageInsert=function(e){if(!e)return!1;var t=new FileReader;return!!e.type.includes("image/")&&(t.readAsDataURL(e),t.onload=function(){n.editor.command(n.createImageBlock,t.result,e.name),n.imageInputRef.current.value=null,n.fileInputRef.current.value=null},!0)},n.createImageBlock=function(e,t,n){e.insertBlock({type:"image",data:{src:t,alt:n}})},n.createFileBlock=function(e,t,n,r){e.insertBlock({type:"file",data:{src:t,alt:n,fileType:r}})};var r=window.localStorage.getItem("editorValue")?f.n.fromJSON(JSON.parse(T.a.cloneDeep(window.localStorage.getItem("editorValue")))):f.n.fromJSON(G),i=window.localStorage.getItem("blockLimit")?Number.parseInt(window.localStorage.getItem("blockLimit")):-1;return n.state={value:r,blockLimit:i},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;console.log(this.state.value.document.getRootBlocksAtRange());var t=!!(this.state.blockLimit>0&&this.state.value&&this.state.value.document)&&this.state.value.document.getRootBlocksAtRange().toArray().length>this.state.blockLimit;return a.a.createElement("div",{style:{width:"60%",backgroundColor:"white",margin:"10px auto",padding:"20px"}},a.a.createElement(b,null,this.renderMarkButton("bold","format_bold"),this.renderMarkButton("italic","format_italic"),this.renderMarkButton("underlined","format_underline"),this.renderMarkButton("strikethrough","strikethrough_s"),this.renderMarkButton("code","code"),this.renderBlockButton("header-1","looks_one"),this.renderBlockButton("header-2","looks_two"),this.renderBlockButton("unordered-list","format_list_bulleted"),this.renderBlockButton("ordered-list","format_list_numbered"),this.renderBlockButton("image","insert_photo"),this.renderBlockButton("file","attach_file"),a.a.createElement(E,{accepttype:"image",ref:this.imageInputRef,onChange:this.imageInputCompletion}),a.a.createElement(E,{ref:this.fileInputRef,onChange:this.fileInputCompletion}),a.a.createElement(O,{active:!0,style:{float:"right"},onClick:this.cancelChanges},a.a.createElement(_,null,"cancel")),a.a.createElement(O,{active:!t,style:{float:"right"},onClick:t?function(){}:this.saveEditor},a.a.createElement(_,null,"save")),a.a.createElement("input",{type:"number",style:{height:"100%",fontSize:"18px",width:"100px",verticalAlign:"text-bottom",float:"right"},placeholder:"Block Limit",value:this.state.blockLimit,onChange:function(t){var n=Number.isNaN(t.target.value)?0:t.target.value;e.setState({blockLimit:n})}})),a.a.createElement(m.a,{ref:this.ref,schema:ee,plugins:$,value:this.state.value,onChange:this.onChange,onKeyDown:this.onKeyDown,renderMark:this.renderMark,renderBlock:this.renderBlock}))}}]),t}(a.a.Component);o.a.render(a.a.createElement(te,null),document.getElementById("root"))},88:function(e,t,n){e.exports=n(197)},93:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.f0fb664e.chunk.js.map